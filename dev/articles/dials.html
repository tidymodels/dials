<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dials">
<title>Working with Tuning Parameters • dials</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Working with Tuning Parameters">
<meta property="og:description" content="dials">
<meta property="og:image" content="https://dials.tidymodels.org/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="dials.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dials</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/dials.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="external-link dropdown-item" href="https://www.tidymodels.org/learn/develop/parameters/">How to create a tuning parameter function</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidymodels/dials/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Working with Tuning Parameters</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/dials/blob/HEAD/vignettes/dials.Rmd" class="external-link"><code>vignettes/dials.Rmd</code></a></small>
      <div class="d-none name"><code>dials.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="tuning-parameters">Tuning Parameters<a class="anchor" aria-label="anchor" href="#tuning-parameters"></a>
</h2>
<p>Some statistical and machine learning models contain <em>tuning
parameters</em> (also known as <em>hyperparameters</em>), which are
parameters that cannot be directly estimated by the model. An example
would be the number of neighbors in a <em>K</em>-nearest neighbors
model. To determine reasonable values of these elements, some indirect
method is used such as resampling or profile likelihood. Search methods,
such as genetic algorithms or Bayesian search can also be used to <a href="https://github.com/topepo/Optimization-Methods-for-Tuning-Predictive-Models" class="external-link">determine
good values</a>.</p>
<p>In any case, some information is needed to create a grid or to
validate whether a candidate value is appropriate (e.g. the number of
neighbors should be a positive integer). <code>dials</code> is designed
to:</p>
<ul>
<li>Create an easy to use framework for describing and querying tuning
parameters. This can include getting sequences or random tuning values,
validating current values, transforming parameters, and other
tasks.</li>
<li>Standardize the names of different parameters. Different packages in
R use different argument names for the same quantities.
<code>dials</code> proposes some standardized names so that the user
doesn’t need to memorize the syntactical minutiae of every package.</li>
<li>Work with the other <a href="https://www.tidymodels.org" class="external-link">tidymodels</a> packages for modeling
and machine learning using <a href="https://www.tidyverse.org/" class="external-link">tidyverse</a> principles.</li>
</ul>
</div>
<div class="section level2">
<h2 id="parameter-objects">Parameter Objects<a class="anchor" aria-label="anchor" href="#parameter-objects"></a>
</h2>
<p>Parameter objects contain information about possible values, ranges,
types, and other aspects. They have two classes: the general
<code>param</code> class and a more specific subclass related to the
type of variable. Double and integer valued data have the subclass
<code>quant_param</code> while character and logicals have
<code>qual_param</code>. There are some common elements for each:</p>
<ul>
<li>Labels are strings that describe the parameter (e.g. “Number of
Components”).</li>
<li>Defaults are optional single values that can be set when one
non-random value is requested.</li>
</ul>
<p>Otherwise, the information contained in parameter objects are
different for different data types.</p>
<div class="section level3">
<h3 id="numeric-parameters">Numeric Parameters<a class="anchor" aria-label="anchor" href="#numeric-parameters"></a>
</h3>
<p>An example of a numeric tuning parameter is the cost-complexity
parameter of CART trees, otherwise known as <span class="math inline">\(C_p\)</span>. A parameter object for <span class="math inline">\(C_p\)</span> can be created in <code>dials</code>
using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dials.tidymodels.org">dials</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cost-Complexity Parameter (quantitative)</span></span>
<span><span class="co">#&gt; Transformer: log-10 [1e-100, Inf]</span></span>
<span><span class="co">#&gt; Range (transformed scale): [-10, -1]</span></span></code></pre></div>
<p>Note that this parameter is handled in log units and the default
range of values is between <code>10^-10</code> and <code>0.1</code>. The
range of possible values can be returned and changed based on some
utility functions. We’ll use the pipe operator here:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/range_validate.html">range_get</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $lower</span></span>
<span><span class="co">#&gt; [1] 1e-10</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $upper</span></span>
<span><span class="co">#&gt; [1] 0.1</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/range_validate.html">range_set</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cost-Complexity Parameter (quantitative)</span></span>
<span><span class="co">#&gt; Transformer: log-10 [1e-100, Inf]</span></span>
<span><span class="co">#&gt; Range (transformed scale): [-5, 1]</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Or using the `range` argument</span></span>
<span><span class="co"># during creation</span></span>
<span><span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cost-Complexity Parameter (quantitative)</span></span>
<span><span class="co">#&gt; Transformer: log-10 [1e-100, Inf]</span></span>
<span><span class="co">#&gt; Range (transformed scale): [-5, 1]</span></span></code></pre></div>
<p>Values for this parameter can be obtained in a few different ways. To
get a sequence of values that span the range:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Natural units:</span></span>
<span><span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_seq</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1e-10 1e-07 1e-04 1e-01</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Stay in the transformed space:</span></span>
<span><span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_seq</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">4</span>, original <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -10  -7  -4  -1</span></span></code></pre></div>
<p>Random values can be sampled too. A random uniform distribution is
used (between the range values). Since this parameter has a
transformation associated with it, the values are simulated in the
transformed scale and then returned in the natural units (although the
<code>original</code> argument can be used here):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">5473</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6.91e-09 8.46e-04 3.45e-06 5.90e-10</span></span></code></pre></div>
<p>For CART trees, there is a discrete set of values that exist for a
given data set. It may be a good idea to assign these possible values to
the object. We can get them by fitting an initial <code>rpart</code>
model and then adding the values to the object. For <code>mtcars</code>,
there are only three values:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bethatkinson/rpart" class="external-link">rpart</a></span><span class="op">)</span></span>
<span><span class="va">cart_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rpart/man/rpart.html" class="external-link">rpart</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">mtcars</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/rpart/man/rpart.control.html" class="external-link">rpart.control</a></span><span class="op">(</span>cp <span class="op">=</span> <span class="fl">0.000001</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cart_mod</span><span class="op">$</span><span class="va">cptable</span></span>
<span><span class="co">#&gt;         CP nsplit rel error xerror  xstd</span></span>
<span><span class="co">#&gt; 1 0.643125      0     1.000  1.064 0.258</span></span>
<span><span class="co">#&gt; 2 0.097484      1     0.357  0.687 0.180</span></span>
<span><span class="co">#&gt; 3 0.000001      2     0.259  0.576 0.126</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cp_vals</span> <span class="op">&lt;-</span> <span class="va">cart_mod</span><span class="op">$</span><span class="va">cptable</span><span class="op">[</span>, <span class="st">"CP"</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># We should only keep values associated with at least one split:</span></span>
<span><span class="va">cp_vals</span> <span class="op">&lt;-</span> <span class="va">cp_vals</span><span class="op">[</span> <span class="va">cart_mod</span><span class="op">$</span><span class="va">cptable</span><span class="op">[</span>, <span class="st">"nsplit"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">]</span></span>
<span></span>
<span><span class="co"># Here the specific Cp values, on their natural scale, are added:</span></span>
<span><span class="va">mtcars_cp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_set</a></span><span class="op">(</span><span class="va">cp_vals</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `value_set()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Some values are not valid: <span style="color: #0000BB;">0.0974840733898344</span> and <span style="color: #0000BB;">1e-06</span>.</span></span></code></pre></div>
<p>The error occurs because the values are not in the transformed
scale:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars_cp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trees.html">cost_complexity</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_set</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="va">cp_vals</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mtcars_cp</span></span>
<span><span class="co">#&gt; Cost-Complexity Parameter (quantitative)</span></span>
<span><span class="co">#&gt; Transformer: log-10 [1e-100, Inf]</span></span>
<span><span class="co">#&gt; Range (transformed scale): [-10, -1]</span></span>
<span><span class="co">#&gt; Values: 2</span></span></code></pre></div>
<p>Now, if a sequence or random sample is requested, it uses the set
values:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars_cp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_seq</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.097484 0.000001</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sampling specific values is done with replacement</span></span>
<span><span class="va">mtcars_cp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/value_validate.html">value_sample</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; .</span></span>
<span><span class="co">#&gt;              1e-06 0.0974840733898344 </span></span>
<span><span class="co">#&gt;                  9                 11</span></span></code></pre></div>
<p>Any transformations from the <code>scales</code> package can be used
with the numeric parameters, or a custom transformation generated with
<code><a href="https://scales.r-lib.org/reference/new_transform.html" class="external-link">scales::trans_new()</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trans_raise</span> <span class="op">&lt;-</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/new_transform.html" class="external-link">trans_new</a></span><span class="op">(</span></span>
<span>  <span class="st">"raise"</span>, </span>
<span>  transform <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span><span class="op">^</span><span class="va">x</span> , </span>
<span>  inverse <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">custom_cost</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cost.html">cost</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>, trans <span class="op">=</span> <span class="va">trans_raise</span><span class="op">)</span></span>
<span><span class="va">custom_cost</span></span>
<span><span class="co">#&gt; Cost (quantitative)</span></span>
<span><span class="co">#&gt; Transformer: raise [-Inf, Inf]</span></span>
<span><span class="co">#&gt; Range (transformed scale): [1, 10]</span></span></code></pre></div>
<p>Note that if a transformation is used, the <code>range</code>
argument specifies the parameter range <em>on the transformed
scale</em>. For this version of <code><a href="../reference/cost.html">cost()</a></code>, parameter values
are sampled between 1 and 10 and then transformed back to the original
scale by the inverse <code>-log2()</code>. So on the original scale, the
sampled values are between <code>-log2(10)</code> and
<code>-log2(1)</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -3.32  0.00</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/value_validate.html">value_sample</a></span><span class="op">(</span><span class="va">custom_cost</span>, <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -3.3172 -0.0314</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="discrete-parameters">Discrete Parameters<a class="anchor" aria-label="anchor" href="#discrete-parameters"></a>
</h3>
<p>In the discrete case there is no notion of a range. The parameter
objects are defined by their discrete values. For example, consider a
parameter for the types of kernel functions that is used with distance
functions:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/weight_func.html">weight_func</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Distance Weighting Function  (qualitative)</span></span>
<span><span class="co">#&gt; 'rectangular', 'triangular', 'epanechnikov', 'biweight', 'triweight', '...</span></span></code></pre></div>
<p>The helper functions are analogues to the quantitative
parameters:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># redefine values</span></span>
<span><span class="fu"><a href="../reference/weight_func.html">weight_func</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_set</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rectangular"</span>, <span class="st">"triangular"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Distance Weighting Function  (qualitative)</span></span>
<span><span class="co">#&gt; 'rectangular' and 'triangular'</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/weight_func.html">weight_func</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_sample</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "triangular" "inv"        "triweight"</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># the sequence is returned in the order of the levels</span></span>
<span><span class="fu"><a href="../reference/weight_func.html">weight_func</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/value_validate.html">value_seq</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "rectangular"  "triangular"   "epanechnikov"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="creating-novel-parameters">Creating Novel Parameters<a class="anchor" aria-label="anchor" href="#creating-novel-parameters"></a>
</h2>
<p>The package contains two constructors that can be used to create new
quantitative and qualitative parameters, <code><a href="../reference/new-param.html">new_quant_param()</a></code>
and <code><a href="../reference/new-param.html">new_qual_param()</a></code>. The <a href="https://www.tidymodels.org/learn/develop/parameters/" class="external-link">How to
create a tuning parameter function</a> article walks you through a
detailed example.</p>
</div>
<div class="section level2">
<h2 id="unknown-values">Unknown Values<a class="anchor" aria-label="anchor" href="#unknown-values"></a>
</h2>
<p>There are some cases where the range of parameter values are data
dependent. For example, the upper bound on the number of neighbors
cannot be known if the number of data points in the training set is not
known. For that reason, some parameters have an <em>unknown</em>
placeholder:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mtry.html">mtry</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Randomly Selected Predictors (quantitative)</span></span>
<span><span class="co">#&gt; Range: [1, ?]</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/trees.html">sample_size</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Observations Sampled (quantitative)</span></span>
<span><span class="co">#&gt; Range: [?, ?]</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/num_comp.html">num_terms</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Model Terms (quantitative)</span></span>
<span><span class="co">#&gt; Range: [1, ?]</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/num_comp.html">num_comp</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Components (quantitative)</span></span>
<span><span class="co">#&gt; Range: [1, ?]</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># and so on</span></span></code></pre></div>
<p>These values must be initialized prior to generating parameter
values. The <code><a href="../reference/finalize.html">finalize()</a></code> methods can be used to help remove
the unknowns:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/finalize.html">finalize</a></span><span class="op">(</span><span class="fu"><a href="../reference/mtry.html">mtry</a></span><span class="op">(</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">mtcars</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Randomly Selected Predictors (quantitative)</span></span>
<span><span class="co">#&gt; Range: [1, 10]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="parameter-sets">Parameter Sets<a class="anchor" aria-label="anchor" href="#parameter-sets"></a>
</h2>
<p>These are collection of parameters used in a model, recipe, or other
object. They can also be created manually and can have alternate
identification fields:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">glmnet_set</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parameters.html">parameters</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lambda <span class="op">=</span> <span class="fu"><a href="../reference/penalty.html">penalty</a></span><span class="op">(</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fu"><a href="../reference/mixture.html">mixture</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">glmnet_set</span></span>
<span><span class="co">#&gt; Collection of 2 parameters for tuning</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  identifier    type    object</span></span>
<span><span class="co">#&gt;      lambda penalty nparam[+]</span></span>
<span><span class="co">#&gt;       alpha mixture nparam[+]</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># can be updated too</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">glmnet_set</span>, alpha <span class="op">=</span> <span class="fu"><a href="../reference/mixture.html">mixture</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.3</span>, <span class="fl">.6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Collection of 2 parameters for tuning</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  identifier    type    object</span></span>
<span><span class="co">#&gt;      lambda penalty nparam[+]</span></span>
<span><span class="co">#&gt;       alpha mixture nparam[+]</span></span></code></pre></div>
<p>These objects can be very helpful when creating tuning grids.</p>
</div>
<div class="section level2">
<h2 id="parameter-grids">Parameter Grids<a class="anchor" aria-label="anchor" href="#parameter-grids"></a>
</h2>
<p>Sets or combinations of parameters can be created for use in grid
search. <code><a href="../reference/grid_regular.html">grid_regular()</a></code>, <code><a href="../reference/grid_regular.html">grid_random()</a></code>,
<code><a href="../reference/grid_max_entropy.html">grid_max_entropy()</a></code>, and <code><a href="../reference/grid_max_entropy.html">grid_latin_hypercube()</a></code>
take any number of <code>param</code> objects or a parameter set.</p>
<p>For example, for a glmnet model, a regular grid might be:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grid_regular.html">grid_regular</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/mixture.html">mixture</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/penalty.html">penalty</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  levels <span class="op">=</span> <span class="fl">3</span> <span class="co"># or c(3, 4), etc</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 2</span></span></span>
<span><span class="co">#&gt;   mixture      penalty</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     0   0.000<span style="text-decoration: underline;">000</span>000<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     0.5 0.000<span style="text-decoration: underline;">000</span>000<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1   0.000<span style="text-decoration: underline;">000</span>000<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     0   0.000<span style="text-decoration: underline;">01</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     0.5 0.000<span style="text-decoration: underline;">01</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     1   0.000<span style="text-decoration: underline;">01</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>     0   1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>     0.5 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span>     1   1</span></span></code></pre></div>
<p>and, similarly, a random grid is created using</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1041</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/grid_regular.html">grid_random</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/mixture.html">mixture</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/penalty.html">penalty</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">6</span> </span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   mixture     penalty</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>   0.200 0.017<span style="text-decoration: underline;">6</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>   0.750 0.000<span style="text-decoration: underline;">388</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   0.191 0.000<span style="text-decoration: underline;">000</span>159</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>   0.929 0.000<span style="text-decoration: underline;">001</span>76 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>   0.143 0.044<span style="text-decoration: underline;">2</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>   0.973 0.011<span style="text-decoration: underline;">0</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://frick.ws" class="external-link">Hannah Frick</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

  </div></footer>
</body>
</html>
